(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0HMw":function(e,t,n){},"1xGU":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,o){var r,l,i=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <li class='event_card' data-id='"+s("function"==typeof(l=null!=(l=d(n,"id")||(null!=t?d(t,"id"):t))?l:c)?l.call(i,{name:"id",hash:{},data:o,loc:{start:{line:3,column:36},end:{line:3,column:42}}}):l)+"'>\r\n      <div class='thumb'>\r\n        <img src='"+s("function"==typeof(l=null!=(l=d(n,"posterUrl")||(null!=t?d(t,"posterUrl"):t))?l:c)?l.call(i,{name:"posterUrl",hash:{},data:o,loc:{start:{line:5,column:18},end:{line:5,column:31}}}):l)+"' alt='"+s("function"==typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:c)?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:5,column:38},end:{line:5,column:46}}}):l)+"' />\r\n      </div>\r\n      <p class='event-title'>"+s("function"==typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:c)?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:7,column:29},end:{line:7,column:37}}}):l)+"</p>\r\n      <p class='event-date'>"+s(u(null!=(r=null!=(r=null!=t?d(t,"dates"):t)?d(r,"start"):r)?d(r,"localDate"):r,t))+"</p>\r\n      <p class='event-location'>"+s(u(null!=(r=null!=(r=null!=(r=null!=t?d(t,"_embedded"):t)?d(r,"venues"):r)?d(r,"0"):r)?d(r,"name"):r,t))+'</p>\r\n      <button class="remove_btn card_button">Remove</button>\r\n    </li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r;return"<ul class='events_list'>\r\n"+(null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:12,column:11}}}))?r:"")+"</ul>"},useData:!0})},"8M+k":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,o){var r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="card-slider">\r\n    <div class="thumbe">\r\n        <img class="slider-img" src="'+e.escapeExpression("function"==typeof(r=null!=(r=l(n,"posterUrl")||(null!=t?l(t,"posterUrl"):t))?r:e.hooks.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"posterUrl",hash:{},data:o,loc:{start:{line:4,column:37},end:{line:4,column:50}}}):r)+'" alt="event" height="auto">\r\n    </div>\r\n</div>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r;return null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:7,column:9}}}))?r:""},useData:!0})},OCZN:function(e,t){$(document).ready((function(){$("body").append('<a href="#" id="go-top" title="Вверх"><div class="go-top-arrow"></div></a>')})),$((function(){$.fn.scrollToTop=function(){$(this).hide().removeAttr("href"),$(window).scrollTop()>="250"&&$(this).fadeIn("slow");var e=$(this);$(window).scroll((function(){$(window).scrollTop()<="250"?$(e).fadeOut("slow"):$(e).fadeIn("slow")})),$(this).click((function(){$("html, body").animate({scrollTop:0},"slow")}))}})),$((function(){$("#go-top").scrollToTop()}))},QfWi:function(e,t,n){"use strict";n.r(t);n("YV5x"),n("0HMw");var a={containerResult:document.querySelector(".container_result"),galleryCardRef:document.querySelector(".event_card"),bodyRef:document.querySelector("body"),htmlRef:document.querySelector("html"),loader:document.querySelector(".loader"),searchInputRef:document.querySelector(".search-input"),searchCountryRef:document.querySelector(".search-country"),sliderRef:document.querySelector(".js-slider-container"),backdropRef:document.querySelector(".backdrop"),paginationRef:document.querySelector("#pagination"),clientEventsBtn:document.querySelector(".client-events-btn"),homePageBtn:document.querySelector(".home-page-btn"),authBtn:document.querySelector(".sign-btn")};n("JBxO"),n("FdtR"),n("lmye"),n("hi3g"),n("lYjL");function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r="qE8iBnVwihSK4QSH4hL5UNRfjujJpVDl",l="https://newsuperserver.herokuapp.com/https://app.ticketmaster.com/discovery/v2/",i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchQuery="",this._page=0,this.totalElements=0,this.totalPages=0}var t,n,a;return t=e,(n=[{key:"goFetch",value:function(e){var t=this;return fetch(e).then((function(e){if(!e.ok)throw new Error;return e.json()})).then((function(e){var n=e.page,a=e._embedded;return t.totalElements=n.totalElements,t.totalPages=n.totalPages,a.events.map(t.normalizeEventObj)}))}},{key:"fetchRandomEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._page=e,this.goFetch("".concat(l,"events.json?size=20&page=").concat(this._page,"&sort=random&apikey=").concat(r)).then((function(e){var t=JSON.stringify(e);return localStorage.setItem("data",t),e}))}},{key:"fetchEventsByKeyWord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._page=e,this.goFetch("".concat(l,"events.json?keyword=").concat(this.searchQuery,"&source=universe&page=").concat(this._page,"&apikey=").concat(r)).then((function(e){var t=JSON.stringify(e);return localStorage.setItem("data",t),e}))}},{key:"fetchEventsByCoutry",value:function(e){return this.goFetch("".concat(l,"events.json?countryCode=").concat(e,"&keyword=").concat(this.searchQuery,"&page=").concat(this._page,"&apikey=").concat(r)).then((function(e){var t=JSON.stringify(e);return localStorage.setItem("data",t),e}))}},{key:"fetchEventImage",value:function(e){return fetch("".concat(l,"events/").concat(e,"/images.json?apikey=").concat(r)).then((function(e){if(!e.ok)throw new Error;return e.json()})).then((function(e){return e.images}))}},{key:"normalizeEventObj",value:function(e){var t=e.images.filter((function(e){return"4_3"===e.ratio})).map((function(e){return e.url}));return e.posterUrl=t[0],e}},{key:"page",get:function(){return this._page},set:function(e){this._page=e}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}])&&o(t.prototype,n),a&&o(t,a),e}(),c=(n("gZlm"),n("OCZN"),n("2c84")),s=n.n(c),u={totalItems:0,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn"  data-index={{page}}>{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected" data-index={{page}}>{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}"></span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}"></span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},d=n("JTMI"),f=n("8M+k"),p=n.n(f),h=new i;new d.a(".glide",{type:"slider",startAt:0,perView:7,autoplay:4e3,hoverpause:!0,bound:!0,gap:30,animationDuration:1200,breakpoints:{1440:{perView:16},767:{perView:10}}}).mount(),h.fetchRandomEvents().then((function(e){a.sliderRef.innerHTML=p()(e)})).catch((function(e){console.log(e)}));var m=n("sAEb"),v=n.n(m);function y(e){var t=v()(e);a.containerResult.innerHTML="",a.containerResult.insertAdjacentHTML("beforeend",t)}n("SgDD"),n("3geU");var g=n("PtTo"),b=n.n(g);function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OOPS!",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"No results found. Please, enter a new request.",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#DC56C5";b.a.show({title:e,message:t,messageSize:"14px",theme:"dark",color:n,position:"bottomRight",closeOnEscape:!0,closeOnClick:!0})}function E(){window.scrollTo({top:400,behavior:"smooth"})}var k=n("jffb"),S=new i;a.searchInputRef.addEventListener("input",k((function(e){e.preventDefault();var t=e.target.value.trim().toLowerCase();if(S.query=t,""!==S.query)return a.containerResult.innerHTML="",void S.fetchEventsByKeyWord().then((function(e){if(0!==e.length)return y(e),e})).then((function(e){var t=new s.a("pagination",u),n=S.totalElements;t.reset(n),t.on("afterMove",(function(e){S.fetchEventsByKeyWord(e.page-1).then((function(e){y(e),E()}))}))})).catch(w)}),1e3)),a.searchCountryRef.addEventListener("change",(function(){a.containerResult.innerHTML="";var e=a.searchInputRef.value,t=a.searchCountryRef.options[a.searchCountryRef.selectedIndex].value,n=new i;n.query=e,n.fetchEventsByCoutry(t).then((function(e){e.length,y(e);var a=new s.a("pagination",u);a.reset(n.totalElements),a.on("afterMove",(function(e){n.page=e.page-1,n.fetchEventsByCoutry(t).then((function(e){y(e),E()}))}))})).catch(w)}));var O=new i;function j(){O.fetchRandomEvents().then((function(e){return y(e),e})).then((function(e){var t=new s.a("pagination",u),n=O.totalElements;return t.reset(n),t})).then((function(e){e.on("afterMove",(function(e){O.fetchRandomEvents(e.page-1).then((function(e){y(e),E()}))}))})).catch(w)}window.addEventListener("DOMContentLoaded",j);n("D/wG"),n("JjHl"),n("IlJM");var L=n("1xGU"),R=n.n(L);function _(){return JSON.parse(localStorage.getItem("clientEvents")||"[]")}function P(e){var t=_();t.push(e),localStorage.setItem("clientEvents",JSON.stringify(t))}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,o=[{key:"create",value:function(e){(function(e){return C.getEventsFromDatabase().then((function(t){if(t){var n=Object.values(t).find((function(t){return t.id===e.id}));if(n)return n}}))})(e).then((function(t){if(!t)return fetch("https://event-booster-app-default-rtdb.firebaseio.com/tickets.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e.dataId=t.name,w("Hooray!","Successfully added","#2bff2f"),e})).then(P);w("Oops!","Already added")}))}},{key:"remove",value:function(e){var t=this;return fetch("https://event-booster-app-default-rtdb.firebaseio.com/tickets/".concat(e,".json"),{method:"DELETE"}).then((function(n){!function(e){var t=_().filter((function(t){return t.dataId!==e}));localStorage.setItem("clientEvents",JSON.stringify(t))}(e),w("Hey!","Event removed","#ff2bbc"),0===_().length&&(a.containerResult.innerHTML=""),t.renderList()}))}},{key:"getEventsFromDatabase",value:function(){return fetch("https://event-booster-app-default-rtdb.firebaseio.com/tickets.json").then((function(e){return e.json()}))}},{key:"renderList",value:function(){var e,t,n=_();n.length?(e=n,t=R()(e),a.containerResult.innerHTML="",a.containerResult.insertAdjacentHTML("beforeend",t)):w("You don't have any events")}}],(n=null)&&T(t.prototype,n),o&&T(t,o),e}();function x(e){return e.preventDefault(),function(e,t){return fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyAalBkuxJcYRoG0ELdN_T_crUpSGAEEyCg"),{method:"POST",body:JSON.stringify({email:e,password:t,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.idToken}))}(e.target.querySelector("#email").value,e.target.querySelector("#password").value)}a.authBtn.addEventListener("click",(function(){(function(e,t){var n=document.createElement("div");n.classList.add("auth-modal");var a="<h1>".concat(e,"</h1><div class='modal-content'>").concat(t,"</div>");n.innerHTML=a,mui.overlay("on",n)})("Authorization",'<form class="mui-form" id="auth-form">\n      <div class="mui-textfield mui-textfield--float-label">\n        <input type="email" id="email" required>\n        <label for="email">Email</label>\n      </div>\n      <div class="mui-textfield mui-textfield--float-label">\n        <input type="password" id="password" required>\n        <label for="password">Password</label>\n      </div>\n      <button\n        type="submit"\n        class="mui-btn mui-btn--raised mui-btn--primary"\n      >\n        Enter\n      </button>\n    </form>'),document.getElementById("auth-form").addEventListener("submit",x,{once:!0})}));var I=a.clientEventsBtn,q=a.homePageBtn;new i;a.containerResult.addEventListener("click",(function(e){if(e.target.classList.contains("add_btn")){var t=e.target.closest(".event_card").dataset.id;C.create((a=t,(o=localStorage.getItem("data"),JSON.parse(o)).filter((function(e){return e.id===a}))[0]))}else if(e.target.classList.contains("remove_btn")){var n=function(e){return _().filter((function(t){return t.id===e}))[0]}(e.target.closest(".event_card").dataset.id).dataId;C.remove(n)}var a,o})),I.addEventListener("click",(function(){C.renderList(),a.paginationRef.classList.add("visually-hidden")})),q.addEventListener("click",(function(){j(),a.paginationRef.classList.remove("visually-hidden")}))},gZlm:function(e,t){window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),500)}},sAEb:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,o){var r,l,i=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s=e.escapeExpression,u=e.lambda,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <li class='event_card all_cards' data-id='"+s("function"==typeof(l=null!=(l=d(n,"id")||(null!=t?d(t,"id"):t))?l:c)?l.call(i,{name:"id",hash:{},data:o,loc:{start:{line:3,column:46},end:{line:3,column:52}}}):l)+"'>\r\n      <div class='thumb'>\r\n        <img src='"+s("function"==typeof(l=null!=(l=d(n,"posterUrl")||(null!=t?d(t,"posterUrl"):t))?l:c)?l.call(i,{name:"posterUrl",hash:{},data:o,loc:{start:{line:5,column:18},end:{line:5,column:31}}}):l)+"' alt='"+s("function"==typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:c)?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:5,column:38},end:{line:5,column:46}}}):l)+"' />\r\n      </div>\r\n      <p class='event-title'>"+s("function"==typeof(l=null!=(l=d(n,"name")||(null!=t?d(t,"name"):t))?l:c)?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:7,column:29},end:{line:7,column:37}}}):l)+"</p>\r\n      <p class='event-date'>"+s(u(null!=(r=null!=(r=null!=t?d(t,"dates"):t)?d(r,"start"):r)?d(r,"localDate"):r,t))+"</p>\r\n      <p class='event-location'>"+s(u(null!=(r=null!=(r=null!=(r=null!=t?d(t,"_embedded"):t)?d(r,"venues"):r)?d(r,"0"):r)?d(r,"name"):r,t))+'</p>\r\n      <button class="add_btn card_button">Add</button>\r\n    </li>\r\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var r;return"<ul class='events_list'>\r\n"+(null!=(r=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:2},end:{line:12,column:11}}}))?r:"")+"</ul>"},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.b17e1074781ee8299258.js.map